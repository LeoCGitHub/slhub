# SLHub - Hub Microservices

Hub centralis√© pour architecture microservices avec Kong API Gateway, Keycloak, monitoring et services backend.

## üìñ Documentation Architecture

La documentation compl√®te de l'architecture est disponible dans [docs/architecture/](docs/architecture/) :

- **[Architecture Globale](docs/architecture/01-architecture-globale.md)** - Vue d'ensemble compl√®te
- **[Flux d'Authentification](docs/architecture/02-flux-authentification.md)** - OAuth2/OIDC avec Keycloak
- **[R√©seau Docker](docs/architecture/03-reseau-docker.md)** - Topologie et communication inter-services

## üèóÔ∏è Microservices

### Convention de nommage

Les repositories de microservices suivent une **nomenclature m√©tier** :
- ‚úÖ `user-service` (gestion utilisateurs)
- ‚úÖ `product-catalog` (catalogue produits)
- ‚úÖ `order-management` (gestion commandes)
- ‚ùå `nestjs-users` (√©viter le nom de la techno)

La stack technique est document√©e dans le README de chaque service.

### Services actuels

| Service | Stack | Description | Port | Repo |
|---------|-------|-------------|------|------|
| user-service | NestJS + PostgreSQL | Gestion utilisateurs et auth | 3000 | [Lien](#) |
| front-angular | Angular | Interface principale | 4200 | [Lien](#) |

### Ajouter un nouveau microservice

Suivez le guide complet : **[docs/AJOUTER_MICROSERVICE.md](docs/AJOUTER_MICROSERVICE.md)**

Ressources disponibles :
- **[Template README](docs/templates/MICROSERVICE_README_TEMPLATE.md)** - √Ä copier pour chaque nouveau service
- **[Guide d'int√©gration](docs/AJOUTER_MICROSERVICE.md)** - √âtapes compl√®tes pour cr√©er et int√©grer un service


TODO LIST
Gestion d'identit√© et s√©curit√©chekc
[x] Keycloak : solution open-source de gestion d'identit√© et d'acc√®s, compatible OAuth2/OpenID Connect, facile √† int√©grer comme serveur d'authentification centralis√©.

Check https://github.com/ferriskey/ferriskey

API Gateway
[] Spring Cloud Gateway (Java/Spring) : flexible, performant, int√©gration native avec Keycloak via OAuth2

[] Kong ou Traefik : gateways cloud-native, supportent l‚Äôauthentification Keycloak

Microservices REST
[] Spring Boot (Java) : framework mature pour cr√©er des microservices robustes et s√©curis√©s

[] Quarkus ou Micronaut (Java) : frameworks modernes et l√©gers, adapt√©s au cloud

[] Node.js + Express/Koa : si besoin de JavaScript/TypeScript

Messaging asynchrone
[] RabbitMQ : syst√®me de queues fiable, facile √† int√©grer

[] Apache Kafka : plateforme de streaming distribu√©e tr√®s scalable, id√©ale pour gros volumes

[] ActiveMQ : autre syst√®me de gestion de message √©prouv√©

D√©couverte et monitoring
[] Consul ou Eureka : service discovery et configuration centralis√©e

[] Prometheus + Grafana : monitoring m√©triques et visualisation

Autres
[] Docker + Kubernetes : pour containerisation, orchestration et scalabilit√©

[] PostgreSQL / MongoDB : bases de donn√©es relationnelles ou NoSQL selon besoins m√©tier

En r√©sum√©, une stack typique Java/Spring avec Keycloak, Spring Cloud Gateway, RabbitMQ/Kafka, containers Docker/K8s offre un socle solide, flexible, et maintenable pour un hub microservices s√©curis√©.

## Gestion Docker Compose

### D√©marrer tous les services
```bash
./up.sh
# ou directement
docker compose up -d
```

### Arr√™ter tous les services
```bash
./down.sh
# ou directement
docker compose down
```

### Commandes utiles
```bash
# Voir les logs de tous les services
docker compose logs -f

# Voir les logs d'un service sp√©cifique
docker compose logs -f keycloak

# Red√©marrer un service
docker compose restart keycloak

# Lister les services actifs
docker compose ps

# Reconstruire et red√©marrer
docker compose up -d --build
```

### Architecture
Le fichier [docker-compose.yml](docker-compose.yml) principal utilise `include:` pour r√©f√©rencer tous les modules :

**Infrastructure :**
- Kong API Gateway (point d'entr√©e unique) - Port 8000
- Keycloak (authentification) - Port 8080
- Prometheus + Grafana (monitoring)

**Bases de donn√©es :**
- PostgreSQL et MongoDB

**Services :**
- Backend Node.js/NestJS
- Frontends Angular et React (comment√©s)

Tous les services partagent le r√©seau `lcg-solutions`.

### Kong API Gateway
Kong est le point d'entr√©e unique de votre architecture. Les clients acc√®dent aux services via Kong qui g√®re :
- Authentification avec Keycloak (OIDC)
- Routing vers les microservices
- Rate limiting, logging, etc.

**Acc√®s :**
- API Proxy : http://localhost:8000
- Kong Manager (UI) : http://localhost:8002
- Admin API : http://localhost:8001

Pour plus de d√©tails, voir [infrastructure/kong/README.md](infrastructure/kong/README.md)

---